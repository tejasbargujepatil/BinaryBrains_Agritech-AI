# KrishiMitra - Backend Documentation ğŸ–¥ï¸

The **KrishiMitra Backend** (formerly ARGUS-AI) is a robust Python FastAPI application that serves as the brain of the platform. It handles authentication, data aggregation, AI processing, and secure API endpoints for the mobile app.

---

## ğŸ›  Technology Stack

- **Framework**: [FastAPI](https://fastapi.tiangolo.com/) (Python)
- **Database**: SQLite (Development) / PostgreSQL (Production ready)
- **AI Engine**: LangChain integration with Google Gemini / OpenAI
- **Containerization**: Docker & Docker Compose
- **Testing**: Pytest

---

## ğŸ“‚ Project Structure

```
KrishiMitra-backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/            # API Route defintions (Endpoints)
â”‚   â”œâ”€â”€ core/           # Core config, security settings
â”‚   â”œâ”€â”€ db/             # Database connection & Session management
â”‚   â”œâ”€â”€ models/         # SQLAlchemy ORM Models
â”‚   â”œâ”€â”€ schemas/        # Pydantic Models (Request/Response validation)
â”‚   â””â”€â”€ services/       # Business Logic (Weather, Soil, Market services)
â”œâ”€â”€ docker/             # Docker configuration files
â”œâ”€â”€ tests/              # Unit and Integration tests
â”œâ”€â”€ requirements.txt    # Python dependencies
â”œâ”€â”€ run.py              # Application Entry point
â””â”€â”€ README.md           # Backend specific readme
```

---

## ğŸš€ Key Services

### 1. **Authentication (JWT)**
- Secure User Registration & Login.
- Role-Based Access Control (Farmer, Admin).
- Token validation middleware.

### 2. **Intelligence Engine**
- **Plan Generation**: Creates personalized crop calendars.
- **Alert System**: Analyzes weather/soil data to generate warnings.
- **Honeypot**: Security mechanism to detect malicious API usage.

### 3. **Data Aggregation**
- **Agmarknet Integration**: Fetches daily market prices.
- **Weather/Soil Proxy**: Caches and serves third-party API data to reducing latency and cost.

---

## ğŸ”§ Setup & Installation

### Option 1: Docker (Recommended)

1.  **Build the Container**:
    ```bash
    docker-compose up --build
    ```
2.  **Access API**:
    The API will be available at `http://localhost:8000`.
    Swagger Docs: `http://localhost:8000/docs`.

### Option 2: Local Python Setup

1.  **Create Virtual Environment**:
    ```bash
    cd KrishiMitra-backend
    python3 -m venv venv
    source venv/bin/activate
    ```

2.  **Install Dependencies**:
    ```bash
    pip install -r requirements.txt
    ```

3.  **Configure Environment**:
    Rename `.env.example` to `.env` and fill in your keys.

4.  **Run Server**:
    ```bash
    python run.py
    ```

---

## ğŸ§ª Testing

Run the full test suite to ensure system stability:
```bash
./test_all_endpoints.sh
```

---
*Generated by Antigravity Agent*
